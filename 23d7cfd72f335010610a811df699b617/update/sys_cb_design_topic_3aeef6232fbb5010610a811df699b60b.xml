<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">7eeef6232fbb5010610a811df699b608</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"fada7e336f3d44188919e30a80bec533","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"fada7e336f3d44188919e30a80bec533"}],"goals":[{"name":"primary","trigger_id":"fada7e336f3d44188919e30a80bec533","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\" I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"6302604dd447419a99224892799fd4cd","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"c69c085a3bf54d82b115eb42985c17be","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"f67364b4aa32450c82e712a90bf6893a","name":"NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"0e4038fa3d3b416f9d72ae53c796e03e","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    return 'You selected:' + vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"da562fca3b1c4ee6b0d91aac55164dbc","name":"Confirm NeedIt Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"0866127005754b2a8e8f34d708c8d5d5","name":"NeedIt List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"70a97055a5054948ab9d25dc796f21ef","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute(table) {\n    /* Code your GlideRecord query logic here. For example:\n\n        var options = [];\n        var gr = new GlideRecord(table);\n        gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('short_description') });\n        }\n        return options;\n    */\n\n    var options = []; // add options here...\n    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\n        while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\n\n    return options;\n})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n    /* Code your GlideRecord query logic here. For example:\n\n        var options = [];\n        var gr = new GlideRecord(table);\n        gr.addEncodedQuery('active=true^numberSTARTSWITHINC001001');\n        gr.setLimit(10);\n        gr.query();\n        while(gr.next()) {\n            options.push({ 'value': gr.getUniqueValue(), 'label': gr.getValue('short_description') });\n        }\n        return options;\n    */\n\n    var options = []; // add options here...\n    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\n        while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\n\n    return options;\n})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"70a97055a5054948ab9d25dc796f21ef","fields":["priority","short_description","u_when_needed"],"id":"a0c45eedb4a64063abbc5186a4055c9c","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"InputPrompt","variable_id":"7d7bd5fc8c674ecb9fef972509de465a","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"56554af4060f4b59bb80aeabda59b519","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"4c8d60698d014e7fb3e0e376b21dda70","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"cc5d1dd32e96411ca54d1f72fba9d935","name":"Yes"}],"id":"4ed7b0807ab14aa0941c14911bfb9c4a","goal_id":"primary"},{"type":"InputPrompt","variable_id":"c3478b0bb5f44ed497a89fba3e0f09a5","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"2b2c8f6593f449a9847608a5dd48f5ff","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"70a97055a5054948ab9d25dc796f21ef","id":"0d6a57f5c6784a1385b2e36536a027b6","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"70a97055a5054948ab9d25dc796f21ef","fields":["u_when_needed","short_description"],"id":"4a033e71ce6145ae88702ca746288331","name":"Updated NeedIt","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"7f3f0464285f4e0bb0c3e6d8d163ae33","name":"Update Field","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"7bb737794faf402ca4b288e72f1fa816","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Please select field to update\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Select field to update","branches":[{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"update_field=nothing"},"id":"67f661da1ef64189bcc608c4b4381a14","name":"Nothing"},{"type":"Branch","label":"Needit Date","expression":{"type":"Applicability","mode":"query","value":"update_field=when needed"},"id":"803030ec68b14510a6869b1257f051ca","name":"Needit Date"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"update_field=short description"},"id":"d1daa1417ab543c69b190d49a6e43ee5","name":"Short Description"}],"id":"b06e0fce2db44709aaedb4d8cfbd75f2","goal_id":"primary"},{"type":"InputPrompt","variable_id":"cc9de3544ec04a1cb9777adf0d7049b8","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Please Enter New Short Description\", vaContext.getRequesterLang())"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"ea614df3ab874e148c2a1fde5c2a71d0","name":"New Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}} ","variable_id":"70a97055a5054948ab9d25dc796f21ef","id":"c25b2ad1ab774054a4cf34ee29cfe118","name":"Update Short Description","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n\n    \t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t\n})()\n","id":"efe51174b8d14e758bc528a23cb0aa1d","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Check if Count is less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n\n    var count = vaVars.search_count;\n    if (count &lt; 3){\n    return true;\n    }\n    else \n    {\n        return false;\n    }\n})()\n"},"id":"a6b040b5604f4761a5d9bd6d8b7c2fe6","name":"Check if Count is less than 3"},{"type":"Branch","label":"If count &gt; 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n    return true;\n\n    var count= vaVars.search_count;\n\n    if(count &gt; 3){\n     return true;\n    }\n    else{\n      return false;\n    }\n})()\n"},"id":"cc79ff501853435fb29085b83f6bd281","name":"If count &gt; 3"}],"id":"fa9420a3e3fd46a3b3d2d3f7efd4e90d","goal_id":"primary"}],"edges":[{"type":"Edge","source_node_id":"c25b2ad1ab774054a4cf34ee29cfe118","target_node_id":"4a033e71ce6145ae88702ca746288331","id":"e025cf8965bf4eb4812e71519cf90b4e"},{"type":"Edge","source_node_id":"6302604dd447419a99224892799fd4cd","target_node_id":"f67364b4aa32450c82e712a90bf6893a","id":"08c02ed4861c4480ab72ccee515f9e50"},{"type":"Edge","source_node_id":"f67364b4aa32450c82e712a90bf6893a","target_node_id":"da562fca3b1c4ee6b0d91aac55164dbc","id":"34143076c1db45d5a5ae6d85e62f0f29"},{"type":"Edge","source_node_id":"da562fca3b1c4ee6b0d91aac55164dbc","target_node_id":"0866127005754b2a8e8f34d708c8d5d5","id":"bc1c425f813441a78c1a7bb4fe1bfde9"},{"type":"Edge","source_node_id":"0866127005754b2a8e8f34d708c8d5d5","target_node_id":"a0c45eedb4a64063abbc5186a4055c9c","id":"1c7f83b320c941fc8a55c5c9d277b0bf"},{"type":"Edge","source_node_id":"56554af4060f4b59bb80aeabda59b519","target_node_id":"4ed7b0807ab14aa0941c14911bfb9c4a","id":"9d3a8ed9d42542f48e6df0e2ec7e6b53"},{"type":"Edge","source_node_id":"4ed7b0807ab14aa0941c14911bfb9c4a","target_node_id":"c69c085a3bf54d82b115eb42985c17be","branch_id":"4c8d60698d014e7fb3e0e376b21dda70","id":"4f7490a3dd0045aa8e36417429312c63","name":"4c8d60698d014e7fb3e0e376b21dda70"},{"type":"Edge","source_node_id":"2b2c8f6593f449a9847608a5dd48f5ff","target_node_id":"0d6a57f5c6784a1385b2e36536a027b6","id":"596faf8c74184ccdb5cc40a80938769f"},{"type":"Edge","source_node_id":"0d6a57f5c6784a1385b2e36536a027b6","target_node_id":"4a033e71ce6145ae88702ca746288331","id":"65e54f570c8648a9963d6163721fa08d"},{"type":"Edge","source_node_id":"4a033e71ce6145ae88702ca746288331","target_node_id":"56554af4060f4b59bb80aeabda59b519","id":"51f506b98ba84885be1e8cb28ed22ba5"},{"type":"Edge","source_node_id":"a0c45eedb4a64063abbc5186a4055c9c","target_node_id":"7f3f0464285f4e0bb0c3e6d8d163ae33","id":"4b5faef61f864464ac40cc4ba007423b"},{"type":"Edge","source_node_id":"7f3f0464285f4e0bb0c3e6d8d163ae33","target_node_id":"b06e0fce2db44709aaedb4d8cfbd75f2","id":"da4870eec572466a8f09b00884e389a4"},{"type":"Edge","source_node_id":"b06e0fce2db44709aaedb4d8cfbd75f2","target_node_id":"56554af4060f4b59bb80aeabda59b519","branch_id":"67f661da1ef64189bcc608c4b4381a14","id":"a3661083b7e940eb80bd192c1e7b283a","name":"67f661da1ef64189bcc608c4b4381a14"},{"type":"Edge","source_node_id":"b06e0fce2db44709aaedb4d8cfbd75f2","target_node_id":"2b2c8f6593f449a9847608a5dd48f5ff","branch_id":"803030ec68b14510a6869b1257f051ca","id":"23314dd2a8314502ba8628c9c960014f","name":"803030ec68b14510a6869b1257f051ca"},{"type":"Edge","source_node_id":"b06e0fce2db44709aaedb4d8cfbd75f2","target_node_id":"ea614df3ab874e148c2a1fde5c2a71d0","branch_id":"d1daa1417ab543c69b190d49a6e43ee5","id":"569227ce6acf4308a8b558cae4463e81","name":"d1daa1417ab543c69b190d49a6e43ee5"},{"type":"Edge","source_node_id":"ea614df3ab874e148c2a1fde5c2a71d0","target_node_id":"c25b2ad1ab774054a4cf34ee29cfe118","id":"fec3974acf98451db9eccdd441c0c658"},{"type":"Edge","source_node_id":"4ed7b0807ab14aa0941c14911bfb9c4a","target_node_id":"efe51174b8d14e758bc528a23cb0aa1d","branch_id":"cc5d1dd32e96411ca54d1f72fba9d935","id":"73ba16a61d894235961f031d417c253f","name":"cc5d1dd32e96411ca54d1f72fba9d935"},{"type":"Edge","source_node_id":"efe51174b8d14e758bc528a23cb0aa1d","target_node_id":"fa9420a3e3fd46a3b3d2d3f7efd4e90d","id":"09390b7facd2456593d64b8b6ec83b51"},{"type":"Edge","source_node_id":"fa9420a3e3fd46a3b3d2d3f7efd4e90d","target_node_id":"0866127005754b2a8e8f34d708c8d5d5","branch_id":"a6b040b5604f4761a5d9bd6d8b7c2fe6","id":"e4af597f8f644774bc01acf81c5804fb","name":"a6b040b5604f4761a5d9bd6d8b7c2fe6"},{"type":"Edge","source_node_id":"fa9420a3e3fd46a3b3d2d3f7efd4e90d","target_node_id":"c69c085a3bf54d82b115eb42985c17be","branch_id":"cc79ff501853435fb29085b83f6bd281","id":"935825cf81544dce8e6a3a72ec45bfaa","name":"cc79ff501853435fb29085b83f6bd281"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"id":"2823d66d406f480294add3990428f061","formatType":"text"},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"38b9881d01274b908377e22de299a71f","formatType":"text"}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text"},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"0e4038fa3d3b416f9d72ae53c796e03e","name":"needit_type","formatType":"text"},{"type":"Reference","table":"x_58872_needit_needit","id":"70a97055a5054948ab9d25dc796f21ef","name":"needit_list","formatType":"text"},{"type":"True/False","id":"7d7bd5fc8c674ecb9fef972509de465a","name":"search_again","formatType":"text"},{"type":"Date/Time","mode":"date","id":"c3478b0bb5f44ed497a89fba3e0f09a5","name":"new_when_needed_date","formatType":"text"},{"type":"Reference","table":"","id":"d4ae673329284cf0be81f56c3364e17c","name":"change_when_needed_date","formatType":"text"},{"type":"Choice","choices":[{"name":"Short Description","element":"short description"},{"name":"When needed","element":"when needed"},{"name":"Nothing","element":"nothing"}],"id":"7bb737794faf402ca4b288e72f1fa816","name":"update_field","formatType":"text"},{"type":"String","name":"new_short_description","id":"cc9de3544ec04a1cb9777adf0d7049b8","formatType":"Text","validationScript":""},{"type":"Reference","table":"x_58872_needit_needit","id":"66bc48c5539f4f67b9f59db68d815c13","name":"update_short_description","formatType":"text"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"23d7cfd72f335010610a811df699b617","domain":"global","topic_type":"STANDARD","channels":[],"id":"c1694fd72f335010610a811df699b61e","name":"_PRVW__3eeef62341bb5010f474574a779eca07","key_phrases":["Update NeedIt Records"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_category":"0438435b2f335010610a811df699b622","library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>c1694fd72f335010610a811df699b61e</design_topic_id>
        <name>_PRVW__3eeef62341bb5010f474574a779eca07</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-10-18 03:57:57</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>3aeef6232fbb5010610a811df699b60b</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_70956_needit_vir">23d7cfd72f335010610a811df699b617</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">23d7cfd72f335010610a811df699b617</sys_scope>
        <sys_update_name>sys_cb_design_topic_3aeef6232fbb5010610a811df699b60b</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-10-18 03:57:57</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
